<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>代購服務 - 代採購平台</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main style="padding-bottom: 80px">
      <h2 style="margin: 10px 0 20px 0; font-size: 1.3rem">
        代購服務 (貼連結下單)
      </h2>

      <div class="assist-notice">
        <p>
          <i class="fas fa-info-circle" style="color: #17a2b8"></i>
          匯率：<span id="display-rate" style="font-weight: bold">...</span> |
          服務費：<span id="display-fee" style="font-weight: bold">...</span>
        </p>
      </div>

      <div class="assist-card">
        <h3><i class="fas fa-plus-circle"></i> 新增商品</h3>

        <div
          class="smart-paste-btn"
          onclick="navigator.clipboard.readText().then(text => document.getElementById('item-url').value = text)"
        >
          <i class="fas fa-paste"></i> 點擊貼上剪貼簿連結
        </div>

        <form id="assist-add-form">
          <div class="form-group">
            <label>商品連結 (URL) *</label>
            <input
              type="url"
              id="item-url"
              placeholder="https://item.taobao.com/..."
              required
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>商品名稱 *</label>
              <input
                type="text"
                id="item-name"
                placeholder="例：夏季短袖T恤"
                required
              />
            </div>
            <div class="form-group">
              <label>規格 (顏色/尺寸)</label>
              <input type="text" id="item-spec" placeholder="例：白色 XL" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>單價 (人民幣 ¥) *</label>
              <input
                type="number"
                id="item-price-cny"
                step="0.01"
                min="0"
                required
              />
            </div>
            <div class="form-group">
              <label>數量 *</label>
              <input
                type="number"
                id="item-quantity"
                value="1"
                min="1"
                required
              />
            </div>
          </div>

          <button
            type="submit"
            class="btn-submit-assist"
            style="width: 100%; background: #f0ad4e"
          >
            加入清單
          </button>
        </form>
      </div>

      <div class="assist-card" id="assist-list-section" style="display: none">
        <h3><i class="fas fa-list-ul"></i> 代購清單</h3>
        <div id="assist-list-container"></div>
        <div
          class="assist-total"
          style="
            margin-top: 15px;
            border-top: 1px solid #eee;
            padding-top: 10px;
          "
        >
          預估總金額：<span
            id="assist-total-display"
            style="font-size: 1.2rem; color: #ff5000"
            >TWD 0</span
          >
        </div>
      </div>

      <div class="assist-card">
        <h3><i class="fas fa-truck"></i> 收件設定</h3>
        <form id="assist-submit-form">
          <div class="form-row">
            <div class="form-group">
              <label>跑跑虎會員編號 *</label>
              <input
                type="text"
                id="paopao-id"
                required
                readonly
                style="background: #eee"
              />
            </div>
            <div class="form-group">
              <label>Email *</label>
              <input
                type="email"
                id="customer-email"
                required
                readonly
                style="background: #eee"
              />
            </div>
          </div>
          <div class="form-group">
            <label>集運倉 (貨物寄送地) *</label>
            <select id="assist-warehouse-select" required>
              <option value="">載入中...</option>
            </select>
          </div>
          <div class="form-group" style="display: none">
            <input
              type="radio"
              name="payment-method"
              value="OFFLINE_TRANSFER"
              checked
            />
          </div>
        </form>
      </div>
    </main>

    <div id="footer-placeholder"></div>

    <div class="assist-floating-bar">
      <div class="assist-total-info">
        <span>預估總金額</span>
        <strong id="float-total-twd">TWD 0</strong>
      </div>
      <button id="submit-order-btn" class="btn-submit-assist" disabled>
        提交訂單
      </button>
    </div>

    <div class="bottom-nav">
      <a href="./index.html" class="bottom-nav-item" id="tab-home">
        <i class="fas fa-home"></i><span>首頁</span>
      </a>
      <a href="./assist.html" class="bottom-nav-item" id="tab-assist">
        <i class="fas fa-search-plus"></i><span>代購</span>
      </a>
      <div class="bottom-nav-item bottom-nav-cart-badge" id="tab-cart">
        <i class="fas fa-shopping-cart"></i><span>購物車</span>
        <span class="nav-badge" id="mobile-cart-count">0</span>
      </div>
      <a href="./my-account.html" class="bottom-nav-item" id="tab-account">
        <i class="fas fa-user"></i><span>我的</span>
      </a>
    </div>

    <div class="modal" id="cart-modal">
      <div class="modal-content">
        <span class="close-button" id="close-modal">&times;</span>
        <h2>您的購物車</h2>
        <div id="cart-items-list"></div>
      </div>
    </div>

    <script type="module" src="../js/assist.js"></script>
  </body>
</html>
