<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Runtiger 代採購平台</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <div class="cart-button-container" id="cart-button">
      <i class="fas fa-shopping-cart" style="font-size: 24px"></i>
      <span class="cart-count" id="cart-count">0</span>
    </div>

    <main>
      <div class="sticky-search-container">
        <div class="search-bar-wrapper">
          <input
            type="search"
            id="product-search-input"
            placeholder="搜尋商品名稱..."
          />
          <button id="product-search-button">搜尋</button>
        </div>
      </div>

      <div id="notice-placeholder"></div>

      <div id="category-filter-bar">
        <p>正在載入分類...</p>
      </div>

      <div id="product-list" class="product-grid">
        <p>正在載入商品...</p>
      </div>

      <div style="height: 20px"></div>
    </main>

    <div class="modal" id="cart-modal">
      <div class="modal-content">
        <span class="close-button" id="close-modal">&times;</span>
        <h2>您的購物車</h2>

        <div
          class="header-notice"
          style="margin-bottom: 15px; padding: 10px; font-size: 0.85rem"
        >
          <p style="margin: 0; color: #d32f2f">
            <strong>⚠️ 結帳前請確認</strong>
          </p>
          <ul style="margin: 5px 0 0 0; padding-left: 20px; color: #555">
            <li>顯示價格為<strong>全額台幣</strong> (含代購費)。</li>
            <li>國際運費需於「跑跑虎集運APP」另行支付。</li>
          </ul>
        </div>

        <div id="cart-items-list">
          <p>您的購物車是空的。</p>
        </div>

        <div class="cart-total">
          <strong>總計: TWD <span id="cart-total-amount">0</span></strong>
        </div>

        <hr />

        <div id="checkout-form-container">
          <h3>結帳資訊</h3>
          <form id="checkout-form">
            <div class="form-group">
              <label>跑跑虎會員編號:</label>
              <input
                type="text"
                id="checkout-paopao-id"
                readonly
                required
                style="background: #eee"
              />
            </div>
            <div class="form-group">
              <label>Email:</label>
              <input
                type="email"
                id="checkout-customer-email"
                readonly
                required
                style="background: #eee"
              />
            </div>

            <div id="warehouse-selection-section">
              <div class="form-group">
                <label>集運倉選擇 (貨物將寄送至此) *:</label>
                <select
                  id="warehouse-select"
                  style="width: 100%; padding: 10px"
                >
                  <option value="">載入中...</option>
                </select>
              </div>
            </div>

            <div
              id="recipient-info-section"
              style="
                display: none;
                background: #fff8e1;
                padding: 10px;
                border-radius: 8px;
                margin-bottom: 15px;
              "
            >
              <p style="color: #ff5000; font-weight: bold; margin-top: 0">
                <i class="fas fa-shipping-fast"></i>
                此單包含直購商品，請填寫台灣收件資訊：
              </p>
              <div class="form-group">
                <label>收件人姓名 *</label>
                <input
                  type="text"
                  id="recipient-name"
                  placeholder="請輸入真實姓名"
                />
              </div>
              <div class="form-group">
                <label>聯絡電話 *</label>
                <input
                  type="tel"
                  id="recipient-phone"
                  placeholder="09xxxxxxxx"
                />
              </div>
              <div class="form-group">
                <label>收件地址 *</label>
                <textarea
                  id="recipient-address"
                  rows="2"
                  placeholder="請輸入完整收件地址"
                ></textarea>
              </div>
            </div>

            <div class="form-group">
              <label>付款方式:</label>
              <div>
                <input
                  type="radio"
                  id="payment-offline"
                  name="payment-method"
                  value="OFFLINE_TRANSFER"
                  checked
                />
                <label for="payment-offline">銀行轉帳 (線下付款)</label>
              </div>
            </div>
            <button
              type="submit"
              id="checkout-button"
              class="btn-submit-order"
              style="
                background: var(--taobao-orange);
                color: white;
                width: 100%;
                padding: 12px;
                border: none;
                border-radius: 20px;
                font-weight: bold;
                margin-top: 10px;
              "
            >
              確認訂購
            </button>
          </form>
        </div>

        <div id="checkout-success-message" style="display: none"></div>
      </div>
    </div>

    <a
      href="https://lin.ee/pb428dF"
      target="_blank"
      rel="noopener noreferrer"
      class="line-float-button"
    >
      <span>LINE</span>
    </a>

    <script type="module" src="../js/app.js"></script>
  </body>
</html>
